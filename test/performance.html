<!doctype html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="http://code.jquery.com/jquery.js"></script>
    </script><script type="text/javascript" src="http://github.com/balupton/jquery-syntaxhighlighter/raw/master/scripts/jquery.syntaxhighlighter.min.js"></script>
    <script src="../jquery-youtube.js"></script>
    <script src="https://github.com/kilhage/jquery-benchmark/raw/master/jquery-benchmark.js"></script>
    <script>
        
$.fn.performanceTest = function(tests){
    var self = this;
    
    $.each(tests, function(module, test){
        self.append("<h2>- "+module+"</h2>");
        $.each(test.tests, function(i, ob){
            //if ( ob.name != "Fast")return;
            try {
            var code = $("<code class='language-javascript'/>").html(ob.fn.toString()).hide();
            $("<li />")
                .html(ob.name+" :: <b>"+ob.test()+"ms</b>")
                .appendTo(self)
                .click(function(){
                    code.slideToggle(50);
                })
                .css({"cursor":"pointer"})
                .append(code);
            } catch(e) {
                console.log(e);
            }
        })
    });
    return this;
};

$(function(){

    $("#results").performanceTest(tests);
    $.SyntaxHighlighter.init();
    
    h = $(".hihi").youtube({
        type: $.youtube.IMAGE,
        id: "47piCmAB0s4"

    }).hide();

});

var times, a, b, tests = {}, _module, 

test = function(name, fn){
    tests[_module].tests.push({
        test: function(){
            times = tests[_module].times;
            var b = $.benchmark();
            fn();
            return b.end().result();
        },
        name: name,
        fn: fn
    });
},

module = function(m, t){
    _module = m;
    tests[m] = {
        times: t,
        tests: []
    };
};

module("Video", 1000);

test("Data from .data, reload", function(){
    while(times--) {
        $('<a data-id="47piCmAB0s4" data-width="300" data-height="240" />').youtube();
    }
    
});

test("Dimentions and id from .data", function(){
    while(times--) {
        a = $(document.createElement("a"))
            .data("id", "47piCmAB0s4")
            .data("width", "300")
            .data("height", "240")
            .youtube();
    }
    
});

test('Dimentions from alt=\'{"width":500,"height":400}\', id from $.data, reload', function(){
    var a;
    while(times--) {
        a = document.createElement("a");
        $.data(a, "id", "47piCmAB0s4");
        a.alt = '{"width":500,"height":400}';
        $(a).youtube();
    }
    
});

test('Dimentions from alt=\'{"width":500,"height":400}\', id from .data, reload', function(){
    var a;
    while(times--) {
        a = document.createElement("a");
        a.alt = '{"width":500,"height":400}';
        $(a).data("id", "47piCmAB0s4").youtube();
    }
    
});

test("Data from json", function(){
    while(times--) {
        $(document.createElement("a")).youtube({
            id: "47piCmAB0s4",
            width: 500,
            height: 400
        });
    }
    
});

test("Fast", function(){
    var a = document.createElement("a"), b = $(a);
    while(times--) {
        b.youtube({
            id: "47piCmAB0s4",
            width: 500,
            height: 400
        });
    }
});

test("Fast2", function(){
    var a = document.createElement("a");
    while(times--) {
        $(a).youtube({
            id: "47piCmAB0s4",
            width: 500,
            height: 400
        });
    }
    
});

module("Image", 1000);

test("Data from json, reload", function(){
    var a;
    while(times--) {
        $(document.createElement("img")).youtube({
            type: $.youtube.IMAGE,
            id: "47piCmAB0s4",
            width: 500,
            height: 400
        });
    }
    
});

test("Dimentions from width/height attributes, id from $.data, reload", function(){
    var img;
    while(times--) {
        img = document.createElement("img");
        img.width = 500;
        img.height = 400;
        $.data(img, "id", "47piCmAB0s4");
        $(img).youtube($.youtube.IMAGE);
    }
    
});

test("Dimentions from width/height attributes, id from .data, reload", function(){
    var img;
    while(times--) {
        img = document.createElement("img");
        img.width = 500;
        img.height = 400;
        $(img).data("id", "47piCmAB0s4").youtube($.youtube.IMAGE);
    }
    
});

test("Fast", function(){
    var img = document.createElement("img");
    while(times--) {
        $(img).youtube({
            type: $.youtube.IMAGE,
            id: "47piCmAB0s4",
            width: 500,
            height: 400
        });
    }
});

test("Fast2", function(){
    var img = document.createElement("img"), b = $(img);
    while(times--) {
        b.youtube({
            type: $.youtube.IMAGE,
            id: "47piCmAB0s4",
            width: 500,
            height: 400
        });
    }
});


    </script>
  </head>
  <body>
      <div id="results" style="margin-top:40px; margin-left: auto;margin-right:auto;width: 1000px;" alt='{"width":500,"height":400}'>
          
          <h1>
              jQuery.youtube - Performance
          </h1>
          
      </div>
      <img class="hihi" width="500" height="400"></a>
  </body>
</html>
